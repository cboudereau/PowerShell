# PowerShell

PsCompletion : autocomplete argument thanks to @thinkbeforecoding

Teamcity module: Get build type, builds, Start and pin build and more

IMPORTANT :
First you have to set TeamCity server by calling Set-Server. By default the uri parameter is http://localhost:7777/httpAuth/app/rest/ for test purpose

In all cmdlet we use Net_Framework build type. In your test you have to replace it or just let the Get-BuildTypes finding all TeamCity buildType from the configured server

## Get-BuildTypes 
Return all TeamCity build types, you can specify the buildType. BuildType are autocomplete with getting first all build types from teamcity server to autocomplete parameter.
Note : if you use httpAuth instead of guest, the cmdlet prompt the credential if not set. All cmdlet reuse this credential in order to communicate with TeamCity REST Api.
Note : The build type id is autogenerated by TeamCity.

Example : Get-BuildType -BuildType Net_Framework

All cmdlet begin with getting the build type and then start, pin, tag, ... make some operations for a given build : 

Example : Get-BuildType -BuildType Net_Framework | Start-Build
  This example start the build type Net_Framework.

## Get-Builds
Get all builds for a given buildType
Example : 

  Get-BuildType -BuildType Net_Framework | Get-Builds -Status SUCCESS
  
    Return all successful Net_Framework build
  
  Get-BuildType -BuildType Net_Framework | Get-Builds -Status SUCCESS -Tags @('Prod')
  
  Get-BuildType -BuildType Net_Framework | Get-Builds -Status SUCCESS -Pinned

## Pin-Build
Pin a given build
Example : 
  
  Get-BuildType -BuildType Net_Framework | Get-Builds -Status FAILURE -Tags @('Prod','Integ') | Pin-Build

Unpin build

Example : 
  
  Get-BuildType -BuildType Net_Framework | Get-Builds -Status FAILURE -Tags @('Prod','Integ') | Pin-Build -Delete

## Tag-Build

Tag a given build

  Example : 
    
    (Get-BuildType -BuildType Net_Framework | Get-Builds)[0] | Tag-Build -Tag 'Prod'
  
  This example Tag the last Net_Framework build
  
  You can add multiple tag by calling cmdlet for each tag

Delete All Tags
  
  (Get-BuildType -BuildType Net_Framework | Get-Builds)[0] | Tag-Build -Delete
